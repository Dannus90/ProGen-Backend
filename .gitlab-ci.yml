services:
  - postgres:12

variables:
  POSTGRES_DB: progenlocal
  POSTGRES_USER: progen
  POSTGRES_PASSWORD: progen
  POSTGRES_HOST_AUTH_METHOD: trust

default:
  image: ubuntu:latest

  before_script:
    - apt-get update
    - echo "Hello Rundberg"
    - apt install --yes --force-yes postgresql-client-12


stages:
  - build
  - ci-test

build:
  stage: build
  script:
    - cat /etc/issue
    - postgres -V
  variables:
    build_path: "$project"

test:
  stage: ci-test
  image: ubuntu:latest
  variables:
    test_path: "$project"
  script:
    - "dotnet test"

