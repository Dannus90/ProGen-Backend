default: 
  image: ubuntu:latest
  
  before_script:
    - sudo apt-get update
    - postgres -V

  services:
    - postgres:12.2-alpine
    - mcr.microsoft.com/dotnet/sdk:5.0
    - mcr.microsoft.com/dotnet/aspnet:5.0

variables:
  project: "ProGenBackend"
  POSTGRES_DB: progenlocal
  POSTGRES_USER: progen
  POSTGRES_PASSWORD: "progen"
  POSTGRES_HOST_AUTH_METHOD: trust

stages:
  - build
  - ci-test

build:
  stage: build
  
  script:
    - echo "hello dererer!" 
  variables:
    build_path: "$project"

test:
  stage: ci-test
  image: ubuntu:latest
  variables:
    test_path: "$project"
  script:
    - "dotnet test"
